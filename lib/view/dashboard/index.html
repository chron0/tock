{% extends 'layout/default.html' %}
{% block content %}
<h2>Job Status Dashboard</h2>
<table class="dataTable">
	<thead>
		<tr>
			<th>Type</th>
			<th>Job ID</th>
			<th>Command</th>
			<th>Parameters</th>
			<th>Host</th>
			<th>Time</th>
			<th>Message</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>
{% endblock %}
{% block pageScripting %}
<script>
	var ioPort = {{ masterExternalPort }};
</script>
<script type="text/template" id="tock-dash-row-template">
	<tr>
		<td><%= data.type %></td>
		<td><a href="/job/<%= data.jobId %>"><%= data.jobId %></a></td>
		<td><%= data.command %></td>
		<td><%= data.params %></td>
		<td><%= data.host %></td>
		<td><%= data.time %></td>
		<td><%= data.message %></td>
		<% if (data.status === 'running') { %>
		<td><a href="/job/<%= data.jobId %>/kill" class="tock-kill-job">Kill Job</a></td>
		<% } else { %>
		<td><%= data.jobId %></td>
		<% } %>
	</tr>
</script>
<script src="http://localhost:{{ masterExternalPort }}/socket.io/socket.io.js"></script>
<script src="/assets/scripts/dashboard.js"></script>
{% endblock %}
